{
  "name": "HiveMind Context Governance - Production Ready Release",
  "branchName": "ralph/hivemind-production-ready",
  "description": "Prepare HiveMind plugin for npm publication with self-rating, sentiment detection, and complexity nudges",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add NPM Publishing Configuration",
      "description": "As a developer, I want the package.json configured correctly so I can publish to npm.",
      "acceptanceCriteria": [
        "Add files array to package.json (include: dist/, README.md, LICENSE)",
        "Add repository field with GitHub URL",
        "Add publishConfig.access: public",
        "Add engines field (node >= 18)",
        "Add .npmignore file",
        "Verify npm pack --dry-run shows correct files",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-002",
      "title": "Add LICENSE File",
      "description": "As a user, I want a proper LICENSE file so I know the terms of use.",
      "acceptanceCriteria": [
        "Create LICENSE file with MIT license",
        "Include copyright year and author",
        "Match license mentioned in package.json",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-003",
      "title": "Add CHANGELOG.md",
      "description": "As a user, I want a changelog so I can track version changes.",
      "acceptanceCriteria": [
        "Create CHANGELOG.md following Keep a Changelog format",
        "Include 1.0.0 release notes",
        "Document breaking changes, features, fixes sections",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-004",
      "title": "Create self_rate Tool",
      "description": "As an AI agent, I want to rate my performance so drift can be detected.",
      "acceptanceCriteria": [
        "Create src/tools/self-rate.ts tool file",
        "Accept parameters: score (1-10), reason (optional), turn_context (optional)",
        "Store ratings in brain.state.ratings array",
        "Log rating to TUI: [SelfRate] Turn {N}: {score}/10",
        "Export from src/tools/index.ts",
        "Add test file tests/self-rate.test.ts with minimum 10 assertions",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-005",
      "title": "Create Auto-Rating on Tool Completion",
      "description": "As a system, I want to auto-track metrics so agents have context for self-assessment.",
      "acceptanceCriteria": [
        "Track success/failure of each tool call in brain.state",
        "Calculate simple health score (success rate * 10)",
        "Store in brain.state.metrics.auto_health_score",
        "Display in TUI status line",
        "Update test coverage",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "",
      "dependsOn": ["US-004"]
    },
    {
      "id": "US-006",
      "title": "Create Sentiment Detection Module",
      "description": "As a system, I want to detect negative signals so context refresh can be triggered.",
      "acceptanceCriteria": [
        "Create src/lib/sentiment.ts module",
        "Detect negative keywords: stop, wrong, no, bad, incorrect, confused",
        "Detect agent failure phrases: I apologize, you are right, I was wrong",
        "Detect cancellation patterns: cancel, abort, start over",
        "Store signals in brain.state.sentiment_signals array",
        "Export detection function for use in hooks",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-007",
      "title": "Create Context Refresh Trigger",
      "description": "As a system, I want to trigger context refresh when sentiment is negative.",
      "acceptanceCriteria": [
        "Create src/lib/context-refresh.ts module",
        "Define threshold: 2 negative signals within 5 turns triggers refresh",
        "Log to TUI: [ContextRefresh] Drift detected. Consider compact_session.",
        "Update active.md with drift warning flag",
        "Export trigger function",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "",
      "dependsOn": ["US-006"]
    },
    {
      "id": "US-008",
      "title": "Integrate Sentiment Detection into Hooks",
      "description": "As a system, I want sentiment detection running on every interaction.",
      "acceptanceCriteria": [
        "Import sentiment detection in src/hooks/tool-gate.ts",
        "Run detection on tool.execute.before hook",
        "Run detection on chat.system.transform hook (user message content)",
        "Store detected signals in brain state",
        "Trigger context refresh when threshold reached",
        "Update tests",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "",
      "dependsOn": ["US-006", "US-007"]
    },
    {
      "id": "US-009",
      "title": "Create Complexity Detection Module",
      "description": "As a system, I want to detect when sessions get complex.",
      "acceptanceCriteria": [
        "Create src/lib/complexity.ts module",
        "Track files touched count (unique file paths from write_file/edit_file)",
        "Track turn count (total tool calls since last declare_intent)",
        "Configurable thresholds (default: 3 files OR 5 turns)",
        "Export complexity check function",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-010",
      "title": "Add Complexity Nudges",
      "description": "As an AI agent, I want gentle nudges when complexity grows.",
      "acceptanceCriteria": [
        "Check complexity after each tool execution",
        "Log to TUI once per session: [Nudge] Complexity rising ({files} files, {turns} turns). Consider declare_intent.",
        "Only show nudge once (deduplicate)",
        "Reset nudge flag on declare_intent",
        "Update tests",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "",
      "dependsOn": ["US-009"]
    },
    {
      "id": "US-011",
      "title": "Set Up GitHub Actions CI",
      "description": "As a maintainer, I want automated testing on GitHub.",
      "acceptanceCriteria": [
        "Create .github/workflows/ci.yml",
        "Run on push to main and PRs",
        "Test on Node 18, 20",
        "Steps: checkout, setup-node, install, typecheck, test, build",
        "Verify workflow passes",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "",
      "dependsOn": []
    },
    {
      "id": "US-012",
      "title": "Update README with New Features",
      "description": "As a user, I want documentation for the new tools.",
      "acceptanceCriteria": [
        "Add self_rate tool documentation",
        "Add complexity nudges explanation",
        "Add sentiment detection section",
        "Update test coverage numbers",
        "Add What's New section for v1.1.0",
        "npm run typecheck passes",
        "npm test passes",
        "npm run build passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "",
      "dependsOn": ["US-004", "US-006", "US-009"]
    }
  ]
}
